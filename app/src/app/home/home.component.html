<div class="blur" [class.-open]="showMenu" (click)="closeMenu()"></div>
<div class="sideMenu" [class.-open]="showMenu">
	<div class="sideMenu_header">
		<div class="sideMenu_icon" (click)="showMenu = false">
			<ng-container *ngTemplateOutlet="crossIcon"></ng-container>
		</div>
	</div>
	<div class="newChat" (click)="createNewChat()">
		<span>New Chat</span>
		<ng-container *ngTemplateOutlet="add"></ng-container>
	</div>
	<div class="chats">
		@for (chat of chats; track $index) {
		<div class="newChat" [class.-active]="chatIndex === $index" (click)="selectChat($index)">
			@if (chat.messages[0]) {
			<span>{{ chat.messages[0].text[chat.messages[0].index] }}</span>
			}@else {
			<span>New Chat #{{ $index + 1 }}</span>
			}
		</div>
		}
	</div>
</div>
<div class="container">
	<app-header [(showMenu)]="showMenu" [loading]="loading" />
	<app-chat class="chat" [form]="form" [messages]="chats[chatIndex].messages" [(loading)]="loading" />
</div>

<ng-template #crossIcon>
	<svg width="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
		<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
		<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
		<g id="SVGRepo_iconCarrier">
			<path
				d="M19 5L4.99998 19M5.00001 5L19 19"
				stroke="#d1d1d1"
				stroke-width="2"
				stroke-linecap="round"
				stroke-linejoin="round"
			></path>
		</g>
	</svg>
</ng-template>

<ng-template #add>
	<svg width="16px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
		<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
		<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
		<g id="SVGRepo_iconCarrier">
			<path
				d="M11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44771 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8Z"
				fill="#d1d1d1"
			></path>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM3.00683 12C3.00683 16.9668 7.03321 20.9932 12 20.9932C16.9668 20.9932 20.9932 16.9668 20.9932 12C20.9932 7.03321 16.9668 3.00683 12 3.00683C7.03321 3.00683 3.00683 7.03321 3.00683 12Z"
				fill="#d1d1d1"
			></path>
		</g>
	</svg>
</ng-template>
